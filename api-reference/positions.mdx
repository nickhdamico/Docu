---
title: "Positions"
description: "View and manage your trading positions"
---

## Overview

The Positions API provides access to your current trading positions, including position size, entry price, unrealized PnL, and position management capabilities. This API is primarily used for margin and derivatives trading.

<Note>
  Position tracking is available for margin trading accounts. Spot trading accounts will show position data only for assets with non-zero balances.
</Note>

## Get All Positions

Retrieve all current positions for your account.

### Endpoint
```http
GET /v1/positions
```

### Query Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `symbol` | string | No | Filter by trading pair |
| `status` | string | No | Filter by position status: "open", "closed" |
| `non_zero_only` | boolean | No | Only return positions with non-zero size |

### Example Request

<CodeGroup>
```bash cURL
curl -X GET "https://api.roxom.io/v1/positions?non_zero_only=true" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json"
```

```python Python
import requests

headers = {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
}

response = requests.get(
    'https://api.roxom.io/v1/positions',
    headers=headers,
    params={'non_zero_only': True}
)

positions = response.json()
for position in positions['data']:
    print(f"{position['symbol']}: {position['size']} @ {position['entry_price']}")
```

```javascript JavaScript
const response = await fetch('https://api.roxom.io/v1/positions?non_zero_only=true', {
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  }
});

const positions = await response.json();
positions.data.forEach(position => {
  console.log(`${position.symbol}: ${position.size} @ ${position.entry_price}`);
});
```
</CodeGroup>

### Response

```json
{
  "data": [
    {
      "position_id": "pos_12345",
      "symbol": "BTC-USD",
      "side": "LONG",
      "size": "0.50000000",
      "entry_price": "44500.00000000",
      "mark_price": "45127.68000000",
      "liquidation_price": "40000.00000000",
      "unrealized_pnl": "313.84000000",
      "unrealized_pnl_percent": "1.41",
      "margin_used": "4450.00000000",
      "margin_ratio": "0.1985",
      "status": "open",
      "created_at": "2024-01-14T15:30:00Z",
      "updated_at": "2024-01-15T10:30:00Z"
    },
    {
      "position_id": "pos_12346",
      "symbol": "ETH-USD", 
      "side": "SHORT",
      "size": "2.00000000",
      "entry_price": "3200.00000000",
      "mark_price": "3150.50000000",
      "liquidation_price": "3500.00000000",
      "unrealized_pnl": "99.00000000",
      "unrealized_pnl_percent": "1.55",
      "margin_used": "1600.00000000",
      "margin_ratio": "0.1234",
      "status": "open",
      "created_at": "2024-01-15T09:15:00Z",
      "updated_at": "2024-01-15T10:30:00Z"
    }
  ],
  "timestamp": "2024-01-15T10:30:00Z",
  "request_id": "req_abc123"
}
```

## Get Specific Position

Retrieve details for a specific position by symbol.

### Endpoint
```http
GET /v1/positions/{symbol}
```

### Example Request

```bash
curl -X GET "https://api.roxom.io/v1/positions/BTC-USD" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json"
```

### Response

```json
{
  "data": {
    "position_id": "pos_12345",
    "symbol": "BTC-USD",
    "side": "LONG",
    "size": "0.50000000",
    "entry_price": "44500.00000000",
    "mark_price": "45127.68000000",
    "liquidation_price": "40000.00000000",
    "unrealized_pnl": "313.84000000",
    "unrealized_pnl_percent": "1.41",
    "margin_used": "4450.00000000",
    "margin_ratio": "0.1985",
    "maintenance_margin": "89.00000000",
    "initial_margin": "4450.00000000",
    "status": "open",
    "leverage": "10.00000000",
    "created_at": "2024-01-14T15:30:00Z",
    "updated_at": "2024-01-15T10:30:00Z",
    "trades": [
      {
        "trade_id": "trade_xyz789",
        "quantity": "0.25000000",
        "price": "44400.00000000",
        "side": "BUY",
        "timestamp": "2024-01-14T15:30:00Z"
      },
      {
        "trade_id": "trade_xyz790",
        "quantity": "0.25000000", 
        "price": "44600.00000000",
        "side": "BUY",
        "timestamp": "2024-01-14T16:45:00Z"
      }
    ]
  },
  "timestamp": "2024-01-15T10:30:00Z",
  "request_id": "req_def456"
}
```

## Close Position

Close an existing position by placing a market order in the opposite direction.

### Endpoint
```http
POST /v1/positions/{symbol}/close
```

### Request Body

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `quantity` | string | No | Partial close quantity (default: full position) |
| `order_type` | string | No | "MARKET" or "LIMIT" (default: "MARKET") |
| `price` | string | No | Limit price (required if order_type is "LIMIT") |

### Example Request

<CodeGroup>
```bash Market Close (Full Position)
curl -X POST "https://api.roxom.io/v1/positions/BTC-USD/close" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{}'
```

```bash Partial Limit Close
curl -X POST "https://api.roxom.io/v1/positions/BTC-USD/close" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "quantity": "0.25000000",
    "order_type": "LIMIT",
    "price": "45200.00000000"
  }'
```

```python Python
import requests

headers = {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
}

# Close partial position with limit order
close_data = {
    'quantity': '0.25000000',
    'order_type': 'LIMIT', 
    'price': '45200.00000000'
}

response = requests.post(
    'https://api.roxom.io/v1/positions/BTC-USD/close',
    headers=headers,
    json=close_data
)

result = response.json()
print(f"Close order ID: {result['data']['order_id']}")
```
</CodeGroup>

### Response

```json
{
  "data": {
    "order_id": "order_close_123",
    "position_id": "pos_12345",
    "symbol": "BTC-USD",
    "side": "SELL",
    "quantity": "0.25000000",
    "order_type": "LIMIT",
    "price": "45200.00000000",
    "status": "NEW",
    "created_at": "2024-01-15T10:35:00Z"
  },
  "timestamp": "2024-01-15T10:35:00Z",
  "request_id": "req_ghi789"
}
```

## Position History

Get historical position data and closed positions.

### Endpoint
```http
GET /v1/positions/history
```

### Query Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `symbol` | string | No | Filter by trading pair |
| `start_time` | integer | No | Start timestamp (Unix milliseconds) |
| `end_time` | integer | No | End timestamp (Unix milliseconds) |
| `limit` | integer | No | Number of records (default: 100, max: 500) |
| `cursor` | string | No | Pagination cursor |

### Example Request

```bash
curl -X GET "https://api.roxom.io/v1/positions/history?symbol=BTC-USD&limit=10" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json"
```

### Response

```json
{
  "data": [
    {
      "position_id": "pos_12344",
      "symbol": "BTC-USD",
      "side": "LONG",
      "size": "0.10000000",
      "entry_price": "43500.00000000",
      "exit_price": "44200.00000000",
      "realized_pnl": "70.00000000",
      "realized_pnl_percent": "1.61",
      "fees_paid": "2.17000000",
      "net_pnl": "67.83000000",
      "status": "closed",
      "opened_at": "2024-01-13T10:00:00Z",
      "closed_at": "2024-01-13T18:30:00Z",
      "duration": "8h 30m"
    }
  ],
  "pagination": {
    "next_cursor": "eyJ0aW1lc3RhbXAiOiIyMDI0LTAxLTEzVDE4OjMwOjAwWiJ9",
    "has_more": true,
    "limit": 10
  }
}
```

## Position Status Values

| Status | Description |
|--------|-------------|
| `open` | Position is currently active |
| `closing` | Position is in the process of being closed |
| `closed` | Position has been fully closed |
| `liquidated` | Position was forcibly closed due to margin requirements |

## Position Sides

| Side | Description |
|------|-------------|
| `LONG` | Bullish position (profit when price increases) |
| `SHORT` | Bearish position (profit when price decreases) |

## Margin and Risk Metrics

### Margin Ratio
```
Margin Ratio = Margin Used / Account Equity
```

### Liquidation Price
The price at which the position will be automatically liquidated to prevent further losses.

### Unrealized PnL
```
Long Position: (Mark Price - Entry Price) × Size
Short Position: (Entry Price - Mark Price) × Size
```

### Maintenance Margin
The minimum margin required to keep the position open.

## Risk Management

<AccordionGroup>
  <Accordion title="Liquidation Prevention">
    - Monitor margin ratio closely (warning at 80%, liquidation at 100%)
    - Add margin to positions approaching liquidation
    - Use stop-loss orders to limit downside risk
    - Consider reducing position size in volatile markets
  </Accordion>

  <Accordion title="Position Monitoring">
    - Set up alerts for significant PnL changes
    - Use WebSocket streams for real-time position updates
    - Regularly review position performance
    - Track correlation between positions to avoid concentration risk
  </Accordion>

  <Accordion title="Exit Strategies">
    - Plan exit strategies before entering positions
    - Use limit orders for better price execution when closing
    - Consider partial closes to lock in profits while maintaining exposure
    - Set trailing stops for trending positions
  </Accordion>
</AccordionGroup>

## Error Handling

Common error scenarios:

### Position Not Found

```json
{
  "error": {
    "code": 404,
    "message": "Position not found",
    "details": "No open position found for symbol 'ETH-USD'"
  }
}
```

### Insufficient Position Size

```json
{
  "error": {
    "code": 400,
    "message": "Insufficient position size",
    "details": "Cannot close 1.00000000, current position size is 0.50000000"
  }
}
```

### Position Already Closing

```json
{
  "error": {
    "code": 400,
    "message": "Position already closing",
    "details": "Position is currently being closed by another order"
  }
}
```

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Orders API"
    icon="list"
    href="/api-reference/orders"
  >
    Learn how to place orders that affect positions
  </Card>
  <Card
    title="WebSocket API"
    icon="bolt"
    href="/websockets"
  >
    Get real-time position updates
  </Card>
</CardGroup>