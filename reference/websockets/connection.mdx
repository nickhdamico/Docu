---
title: "Connection"
description: "Establish and maintain reliable WebSocket connections"
---

## Overview

WebSocket connection management is fundamental to accessing Roxom's real-time data streams. This section covers connection establishment, authentication, heartbeat management, and reconnection strategies.

## Connection Types

<CardGroup cols={2}>
  <Card
    title="Basic Connection"
    icon="plug"
    href="/reference/websockets/connection/basic"
  >
    Simple WebSocket connection for public market data
  </Card>
  <Card
    title="Authenticated Connection"
    icon="shield-keyhole"
    href="/reference/websockets/connection/authentication"
  >
    Secure connection for private account data streams
  </Card>
  <Card
    title="Connection Management"
    icon="arrows-rotate"
    href="/reference/websockets/connection/management"
  >
    Heartbeat, reconnection, and error handling
  </Card>
  <Card
    title="Environment Setup"
    icon="gear"
    href="/reference/websockets/connection/environment"
  >
    Production vs sandbox configuration
  </Card>
</CardGroup>

## Quick Start

### Connection (API key authentication)
```javascript
const timestamp = Date.now();
const signature = generateHMACSignature(apiSecret, timestamp.toString());

// Most WebSocket clients don't support custom headers directly; use your env's option if available.
// For Node/tungstenite-style clients you can set headers as below.
const ws = new WebSocket('wss://ws.roxom.com/ws', [], {
  headers: {
    'X-API-Key': apiKey
  }
});

ws.onopen = () => console.log('Connected');
ws.onmessage = (event) => console.log('Received:', JSON.parse(event.data));
```

The WebSocket server requires API key headers during the handshake:

- `X-API-Key`
- `X-API-Timestamp` (milliseconds)
- `X-API-Signature` (HMAC of timestamp)

## Connection Workflow

<Steps>
<Step title="Environment Setup">
  Configure your environment variables and connection URLs for production or sandbox.
</Step>

<Step title="Establish Connection">
  Connect to the appropriate WebSocket endpoint with or without authentication headers.
</Step>

<Step title="Handle Connection Events">
  Implement event handlers for open, message, close, and error events.
</Step>

<Step title="Implement Heartbeat">
  Set up ping/pong mechanism to maintain connection health.
</Step>

<Step title="Add Reconnection Logic">
  Implement exponential backoff reconnection strategy for reliability.
</Step>
</Steps>

## Best Practices

<AccordionGroup>
  <Accordion title="Connection Pooling">
    - Use a single WebSocket connection per application
    - Avoid creating multiple connections unnecessarily
    - Share connections across different parts of your application
  </Accordion>

  <Accordion title="Resource Management">
    - Always close connections when shutting down
    - Clear intervals and timeouts properly
    - Handle memory leaks from event listeners
  </Accordion>

  <Accordion title="Error Handling">
    - Implement robust error handling for all connection states
    - Log connection events for debugging
    - Monitor connection status metrics
  </Accordion>
</AccordionGroup>

## Next Steps

After establishing a connection, you can:

- Subscribe to [Market Data](/reference/websockets/market-data) streams for real-time quotes and trades
- Enable [Account Updates](/reference/websockets/account-updates) for order and balance notifications
- Review [Authentication](/reference/authentication) requirements for private data access