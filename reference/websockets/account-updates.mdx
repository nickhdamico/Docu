---
title: "Account Updates"
description: "Real-time account and order updates via WebSocket"
---

## Overview

Receive real-time updates for your account activity through authenticated WebSocket connections. After connecting with valid API credentials, subscribe to the private channels you need.

<Warning>
  Account update streams require authentication. You must include valid API credentials in your WebSocket connection headers.
</Warning>

## Available Private Streams

<CardGroup cols={2}>
  <Card
    title="Order Updates"
    icon="list-check"
    href="/reference/websockets/account-updates/orders"
  >
    Real-time order status changes and fills
  </Card>
  <Card
    title="Balance Updates"
    icon="wallet"
    href="/reference/websockets/account-updates/balance"
  >
    Account balance changes from trades and transfers
  </Card>
  <Card
    title="Position Updates"
    icon="chart-area"
    href="/reference/websockets/account-updates/positions"
  >
    Position changes and profit/loss updates
  </Card>
  <Card
    title="Account Notifications"
    icon="bell"
    href="/reference/websockets/account-updates/notifications"
  >
    Account-level alerts and status updates
  </Card>
</CardGroup>

## Stream Types Overview

| Channel | Description | Auto-Enabled | Authentication |
|---------|-------------|--------------|----------------|
| `orders` | Order status changes and fills | ❌ No (subscribe) | Required |
| `balance` | Account balance updates | ❌ No (subscribe) | Required |
| `positions` | Position changes and PnL | ❌ No (subscribe) | Required |
| `account` | Account-level notifications | ❌ No (subscribe) | Required |

## Quick Start

### Authenticated Connection Setup
```javascript
const timestamp = Date.now().toString();
const signature = generateHMACSignature(apiSecret, timestamp);

const ws = new WebSocket('wss://ws.roxom.com/ws', [], {
  headers: {
    'X-API-KEY': 'your-api-key',
    'X-API-TIMESTAMP': timestamp,
    'X-API-SIGN': signature
  }
});

ws.onopen = () => {
  ws.send(JSON.stringify({
    op: 'subscribe',
    args: [ { channel: 'orders' }, { channel: 'positions' }, { channel: 'balance' } ]
  }));
};

ws.onmessage = (event) => {
      const data = JSON.parse(event.data);
  
  if (data.event === 'subscribe') return; // subscription ack
  if (data.data && data.data.type === 'order') handleOrderUpdate(data.data);
  if (data.data && data.data.type === 'position') handlePositionUpdate(data.data);
  if (data.data && data.data.type === 'balance') handleBalanceUpdate(data.data);
};
```

### HMAC Signature Generation
```javascript
function generateHMACSignature(secret, timestamp) {
  const crypto = require('crypto');
  return crypto
    .createHmac('sha256', secret)
    .update(timestamp)
    .digest('base64');
}
```

## Message Format

All account update messages follow a consistent structure:

```json
{
  "type": "order|balance|position|account",
  "data": {
    "accountId": "01234567-89ab-7def-8123-456789abcdef",
    // Type-specific data fields
    "timestamp": 1640995200000000000
  }
}
```

## Common Use Cases

<AccordionGroup>
  <Accordion title="Order Management Systems">
    Monitor order fills, cancellations, and rejections in real-time to maintain accurate order state and trigger appropriate business logic.
  </Accordion>

  <Accordion title="Risk Management">
    Track position changes and unrealized P&L to implement stop-loss mechanisms and position size limits.
  </Accordion>

  <Accordion title="Portfolio Monitoring">
    Real-time balance updates enable dynamic portfolio rebalancing and cash management strategies.
  </Accordion>

  <Accordion title="Algorithmic Trading">
    Use order and position updates to trigger next steps in multi-leg trading strategies and complex order workflows.
  </Accordion>
</AccordionGroup>

## Error Handling

<AccordionGroup>
  <Accordion title="Authentication Failed">
    **Cause**: Invalid API credentials or signature
    
    **Solution**: 
    - Verify API key is correct and active
    - Ensure timestamp is current (within 30 seconds)
    - Check HMAC signature generation
  </Accordion>

  <Accordion title="Connection Timeout">
    **Cause**: Network or server connectivity issues
    
    **Solution**:
    - Implement reconnection logic with exponential backoff
    - Monitor connection health with heartbeat
    - Handle reconnection state recovery
  </Accordion>

  <Accordion title="Rate Limiting">
    **Cause**: Too many connection attempts
    
    **Solution**:
    - Use single connection per application
    - Implement connection pooling
    - Add delays between reconnection attempts
  </Accordion>
</AccordionGroup>

## Best Practices

<AccordionGroup>
  <Accordion title="State Management">
    - Maintain local copies of order and position state
    - Handle message ordering and potential duplicates
    - Implement proper state reconciliation on reconnection
    - Use message timestamps for event sequencing
  </Accordion>

  <Accordion title="Performance Optimization">
    - Process updates asynchronously to avoid blocking
    - Batch UI updates for high-frequency streams
    - Implement efficient data structures for tracking
    - Monitor memory usage for long-running connections
  </Accordion>

  <Accordion title="Reliability">
    - Implement comprehensive error handling
    - Log all account events for audit trails
    - Use heartbeat monitoring for connection health
    - Plan for graceful degradation during outages
  </Accordion>
</AccordionGroup>

## Authentication Requirements

To access private account streams, you need:

1. **Valid API Credentials**: Active API key with appropriate permissions
2. **Proper Signature**: HMAC-SHA256 signature of the timestamp
3. **Current Timestamp**: Within 30 seconds of server time
4. **Correct Headers**: All required authentication headers included

See the [Authentication Guide](/reference/authentication) for detailed setup instructions.

## Next Steps

- Set up [Connection Authentication](/reference/websockets/connection/authentication) for private streams
- Learn about specific [Order Update](/reference/websockets/account-updates/orders) message formats
- Explore [Balance Update](/reference/websockets/account-updates/balance) tracking strategies
- Review [Position Update](/reference/websockets/account-updates/positions) monitoring techniques